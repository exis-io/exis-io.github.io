{
    "Pub/Sub Basic": {
        "js": {
            "publish": {
                "code": [
                    "    backend.publish(\"basicSub\", \"Hello\");"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/sub-client.js",
                "lineEnd": 14,
                "lineStart": 13
            },
            "subscribe": {
                "code": [
                    "    this.subscribe(\"basicSub\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hello\"",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/js/example/sub-backend.js",
                "lineEnd": 26,
                "lineStart": 23
            }
        },
        "python": {
            "publish": {
                "code": [
                    "        backend.publish(\"basicSub\", \"Hello\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/sub-client.py",
                "lineEnd": 14,
                "lineStart": 13
            },
            "subscribe": {
                "code": [
                    "        @want(str)",
                    "        def basicSub(s):",
                    "            print s  # Expects a str, like \"Hello\"",
                    "",
                    "        self.subscribe(\"basicSub\", basicSub)"
                ],
                "expectType": "str",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/python/example/sub-backend.py",
                "lineEnd": 18,
                "lineStart": 13
            }
        },
        "swift": {
            "publish": {
                "code": [
                    "        backend.publish(\"basicSub\", \"Hello\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/sender.swift",
                "lineEnd": 49,
                "lineStart": 48
            },
            "subscribe": {
                "code": [
                    "        subscribe(\"basicSub\") { (a: String) in",
                    "            print(\"Received publish: \\(a)\")",
                    "        }.then {",
                    "            print(\"Subscription succeeded\")",
                    "        }.error { reason in",
                    "            print(\"An error occured\", reason)",
                    "        }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/receiver.swift",
                "lineEnd": 162,
                "lineStart": 155
            }
        }
    },
    "Pub/Sub Basic Two": {
        "js": {
            "publish": {
                "code": [
                    "    backend.publish(\"basicSubTwo\", \"Hello\", 3);"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/sub-client.js",
                "lineEnd": 18,
                "lineStart": 17
            },
            "subscribe": {
                "code": [
                    "    this.subscribe(\"basicSubTwo\", riffle.want(function(s, i) {",
                    "        console.log(s, i); // Expects a String, like \"Hello 3\"",
                    "    }, String, Number));"
                ],
                "expectType": "String",
                "expectVal": "\"Hello 3\"",
                "file": "/home/lance/Exis/js/example/sub-backend.js",
                "lineEnd": 32,
                "lineStart": 29
            }
        }
    },
    "Pub/Sub Objects": {
        "python": {
            "publish": {
                "code": [
                    "        class Stuff(riffle.ModelObject):",
                    "            name = \"This guy\"",
                    "",
                    "        s = Stuff()",
                    "        backend.publish(\"objectSub\", s)"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/sub-client.py",
                "lineEnd": 22,
                "lineStart": 17
            },
            "subscribe": {
                "code": [
                    "        class Stuff(riffle.ModelObject):",
                    "            name = \"\"",
                    "",
                    "        @want(Stuff)",
                    "        def objectSub(o):",
                    "            print o  # Expects an object, like Stuff",
                    "",
                    "        self.subscribe(\"objectSub\", objectSub)"
                ],
                "expectType": "object",
                "expectVal": "Stuff",
                "file": "/home/lance/Exis/python/example/sub-backend.py",
                "lineEnd": 29,
                "lineStart": 21
            }
        }
    },
    "REPL Template": {
        "js": {
            "template": {
                "code": [
                    "",
                    "var riffle = require('jsriffle');",
                    "",
                    "riffle.setFabricSandbox();",
                    "",
                    "var app = riffle.Domain(\"xs.demo.test\");",
                    "var backend = app.subdomain(\"backend\");",
                    "",
                    "backend.onJoin = function() {",
                    "",
                    "    // Exis code goes here",
                    "",
                    "};",
                    "",
                    "backend.join()"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/repl-template.js",
                "lineEnd": 18,
                "lineStart": 3
            }
        },
        "python": {
            "template": {
                "code": [
                    "import riffle",
                    "from riffle import want",
                    "",
                    "riffle.SetFabricSandbox()",
                    "",
                    "class Backend(riffle.Domain):",
                    "",
                    "    def onJoin(self):",
                    "",
                    "        # Exis code goes here",
                    "",
                    "",
                    "app = riffle.Domain(\"xs.demo.test\")",
                    "",
                    "Backend(\"backend\", superdomain=app).join()"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/repl-template.py",
                "lineEnd": 18,
                "lineStart": 3
            }
        },
        "swift": {
            "template": {
                "code": [
                    "import Foundation",
                    "import Riffle",
                    "",
                    "// This connects us to the sandbox fabric",
                    "Riffle.SetFabricSandbox()",
                    "",
                    "class ExisBackend: Riffle.Domain, Riffle.Delegate  {",
                    "",
                    "    // When the connection is established this function is called",
                    "    override func onJoin() {",
                    "",
                    "        // Exis code goes here",
                    "",
                    "    }",
                    "}",
                    "",
                    "// Setup the domain here",
                    "ExisBackend(name: \"xs.demo.test.backend\").join()",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/repl-template.swift",
                "lineEnd": 23,
                "lineStart": 4
            }
        }
    },
    "Reg/Call Basic 1": {
        "swift": {
            "call": {
                "code": [
                    "        backend.call(\"basicReg\", \"Hello\").then { (a: String) in",
                    "            print(a) // Expects a String, like \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/swift/example/sender.swift",
                "lineEnd": 57,
                "lineStart": 54
            },
            "register": {
                "code": [
                    "        register(\"basicReg\") { (args: String) -> String in",
                    "            print(\"\\(args)\") // Expects a String, like \"Hello\"",
                    "            return \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/swift/example/receiver.swift",
                "lineEnd": 171,
                "lineStart": 167
            }
        }
    },
    "Reg/Call int str": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"regIntStr\", 42).want(String).then(function (s) {",
                    "        console.log(s); // Expects a String, like \"Hello World\"",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/js/example/reg-client.js",
                "lineEnd": 37,
                "lineStart": 31
            },
            "register": {
                "code": [
                    "    this.register(\"regIntStr\", riffle.want(function(i) {",
                    "        console.log(i); // Expects a Number, like 42",
                    "        return \"Hello World\";",
                    "    }, Number));"
                ],
                "expectType": "Number",
                "expectVal": "42",
                "file": "/home/lance/Exis/js/example/reg-backend.js",
                "lineEnd": 30,
                "lineStart": 26
            }
        },
        "python": {
            "call": {
                "code": [
                    "        s = backend.call(\"regIntStr\", 42).wait(str)",
                    "        print s # Expects a str, like \"Hello World\""
                ],
                "expectType": "str",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/python/example/reg-client.py",
                "lineEnd": 26,
                "lineStart": 24
            },
            "register": {
                "code": [
                    "        @want(int)",
                    "        def regIntStr(i):",
                    "            print(i)  # Expects an int, like 42",
                    "            return \"Hello World\"",
                    "        self.register(\"regIntStr\", regIntStr)"
                ],
                "expectType": "int",
                "expectVal": "42",
                "file": "/home/lance/Exis/python/example/reg-backend.py",
                "lineEnd": 34,
                "lineStart": 29
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        call(\"regIntStr\", 42).then { (s: String) in",
                    "            print(s) // Expects a String, like \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/swift/example/reg-client.swift",
                "lineEnd": 22,
                "lineStart": 19
            },
            "register": {
                "code": [
                    "        register(\"regIntStr\") { (i: Int) -> String in",
                    "            print(\"\\(i)\") // Expects a String, like \"42\"",
                    "            return \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"42\"",
                "file": "/home/lance/Exis/swift/example/reg-backend.swift",
                "lineEnd": 25,
                "lineStart": 21
            }
        }
    },
    "Reg/Call str int": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"regStrInt\", \"Hello\").want(Number).then(function (i) {",
                    "        console.log(i); // Expects an int, like 42",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "int",
                "expectVal": "42",
                "file": "/home/lance/Exis/js/example/reg-client.js",
                "lineEnd": 28,
                "lineStart": 22
            },
            "register": {
                "code": [
                    "    this.register(\"regStrInt\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hello\"",
                    "        return 42;",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/js/example/reg-backend.js",
                "lineEnd": 23,
                "lineStart": 19
            }
        },
        "python": {
            "call": {
                "code": [
                    "        i = backend.call(\"regStrInt\", \"Hello\").wait(int)",
                    "        print i # Expects an int, like 42"
                ],
                "expectType": "int",
                "expectVal": "42",
                "file": "/home/lance/Exis/python/example/reg-client.py",
                "lineEnd": 21,
                "lineStart": 19
            },
            "register": {
                "code": [
                    "        @want(str)",
                    "        def regStrInt(s):",
                    "            print(s)  # Expects a str, like \"Hello\"",
                    "            return 42",
                    "        self.register(\"regStrInt\", regStrInt)"
                ],
                "expectType": "str",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/python/example/reg-backend.py",
                "lineEnd": 26,
                "lineStart": 21
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        call(\"regStrInt\", \"Hello\").then { (i: Int) in",
                    "            print(\"\\(i)\") // Expects an Int, like 42",
                    "        }"
                ],
                "expectType": "Int",
                "expectVal": "42",
                "file": "/home/lance/Exis/swift/example/reg-client.swift",
                "lineEnd": 16,
                "lineStart": 13
            },
            "register": {
                "code": [
                    "        register(\"regStrInt\") { (s: String) -> Int in",
                    "            print(s) // Expects a String, like \"Hello\"",
                    "            return 42",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/swift/example/reg-backend.swift",
                "lineEnd": 18,
                "lineStart": 14
            }
        }
    },
    "Reg/Call str str": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"regStrStr\", \"Hello\").want(String).then(function (s) {",
                    "        console.log(s); // Expects a String, like \"Hello World\"",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/js/example/reg-client.js",
                "lineEnd": 19,
                "lineStart": 13
            },
            "register": {
                "code": [
                    "    this.register(\"regStrStr\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hello\"",
                    "        return \"Hello World\";",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/js/example/reg-backend.js",
                "lineEnd": 16,
                "lineStart": 12
            }
        },
        "python": {
            "call": {
                "code": [
                    "        s = backend.call(\"regStrStr\", \"Hello\").wait(str)",
                    "        print s # Expects a str, like \"Hello World\""
                ],
                "expectType": "str",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/python/example/reg-client.py",
                "lineEnd": 16,
                "lineStart": 14
            },
            "register": {
                "code": [
                    "        @want(str)",
                    "        def regStrStr(s):",
                    "            print(s)  # Expects a str, like \"Hello\"",
                    "            return \"Hello World\"",
                    "        self.register(\"regStrStr\", regStrStr)"
                ],
                "expectType": "str",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/python/example/reg-backend.py",
                "lineEnd": 18,
                "lineStart": 13
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        call(\"regStrStr\", \"Hello\").then { (s: String) in",
                    "            print(s) // Expects a String, like \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/swift/example/reg-client.swift",
                "lineEnd": 10,
                "lineStart": 7
            },
            "register": {
                "code": [
                    "        register(\"regStrStr\") { (s: String) -> String in",
                    "            print(s) // Expects a String, like \"Hello\"",
                    "            return \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/swift/example/reg-backend.swift",
                "lineEnd": 11,
                "lineStart": 7
            }
        }
    },
    "Stub": {
        "js": {
            "call": {
                "code": [
                    "console.log(\"Call start\");",
                    "console.log(\"___NODERESTART___,in:0.5,wait:0.5\");",
                    "setTimeout(function (){",
                    "    console.log(\"Call then\"); // Expects a String, like \"Call then\"",
                    "}, 1000);"
                ],
                "expectType": "String",
                "expectVal": "\"Call then\"",
                "file": "/home/lance/Exis/js/example/stub.js",
                "lineEnd": 14,
                "lineStart": 9
            },
            "register": {
                "code": [
                    "console.log(\"Registering\"); // Expects a String, like \"Registering\""
                ],
                "expectType": "String",
                "expectVal": "\"Registering\"",
                "file": "/home/lance/Exis/js/example/stub.js",
                "lineEnd": 5,
                "lineStart": 4
            }
        }
    },
    "Test Backend leave": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"testBackendLeave\", \"Leave\").want(String).then(function (s) {",
                    "        console.log(\"GOT: \", s);",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/test-client.js",
                "lineEnd": 32,
                "lineStart": 26
            },
            "register": {
                "code": [
                    "    var self = this;",
                    "    this.onLeave = function() {",
                    "        console.log(\"On Leave Triggered\"); // Expects a String, like \"On Leave Triggered\"",
                    "    };",
                    "    this.register(\"testBackendLeave\", riffle.want(function(s) {",
                    "        self.leave();",
                    "        return \"Leaving\";",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"On Leave Triggered\"",
                "file": "/home/lance/Exis/js/example/test-backend.js",
                "lineEnd": 28,
                "lineStart": 20
            }
        }
    },
    "Test Client leave": {
        "js": {
            "call": {
                "code": [
                    "    var self = this;",
                    "    this.onLeave = function() {",
                    "        console.log(\"On Leave Triggered\"); // Expects a String, like \"On Leave Triggered\"",
                    "    };",
                    "    backend.call(\"testClientLeave\", \"Leave\").want(String).then(function (s) {",
                    "        self.leave();",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"On Leave Triggered\"",
                "file": "/home/lance/Exis/js/example/test-client.js",
                "lineEnd": 23,
                "lineStart": 13
            },
            "register": {
                "code": [
                    "    this.register(\"testClientLeave\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Leave\"",
                    "        return \"Leaving\";",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Leave\"",
                "file": "/home/lance/Exis/js/example/test-backend.js",
                "lineEnd": 17,
                "lineStart": 13
            }
        }
    },
    "Test Restart after reg": {
        "js": {
            "call": {
                "code": [
                    "    setTimeout(function (){",
                    "        backend.call(\"restartAfterR\", \"Restart after reg\").want(String).then(function(s) {",
                    "            console.log(s); // Expects a String, like \"Restart after reg works\"",
                    "        });",
                    "    }, 4000);"
                ],
                "expectType": "String",
                "expectVal": "\"Restart after reg works\"",
                "file": "/home/lance/Exis/js/example/test-restart-client.js",
                "lineEnd": 30,
                "lineStart": 25
            },
            "register": {
                "code": [
                    "    this.register(\"restartAfterR\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Restart after reg\"",
                    "        return s + \" works\";",
                    "    }, String));",
                    "    setTimeout(function (){",
                    "        console.log(\"___NODERESTART___\");",
                    "    }, 1000);"
                ],
                "expectType": "String",
                "expectVal": "\"Restart after reg\"",
                "file": "/home/lance/Exis/js/example/test-restart-backend.js",
                "lineEnd": 28,
                "lineStart": 21
            }
        },
        "python": {
            "call": {
                "code": [
                    "        import time",
                    "        time.sleep(2.0)",
                    "        s = backend.call(\"restartAfterR\", \"Restart after reg\").wait(str)",
                    "        print(s) # Expects a str, like \"Restart after reg works\""
                ],
                "expectType": "str",
                "expectVal": "\"Restart after reg works\"",
                "file": "/home/lance/Exis/python/example/test-restart-client.py",
                "lineEnd": 27,
                "lineStart": 23
            },
            "register": {
                "code": [
                    "        import time",
                    "        @want(str)",
                    "        def restartAfterR(s):",
                    "            print(s) # Expects a str, like \"Restart after reg\"",
                    "            return \"{} works\".format(s)",
                    "        self.register(\"restartAfterR\", restartAfterR)",
                    "        time.sleep(1.0)",
                    "        print \"___NODERESTART___\"",
                    "        time.sleep(2.0)"
                ],
                "expectType": "str",
                "expectVal": "\"Restart after reg\"",
                "file": "/home/lance/Exis/python/example/test-restart-backend.py",
                "lineEnd": 31,
                "lineStart": 22
            }
        }
    },
    "Test Restart before call": {
        "js": {
            "call": {
                "code": [
                    "    // Trying to restart the node before the call happens, but need to insert",
                    "    // artificial delay to make this happen!",
                    "    console.log(\"___NODERESTART___\");",
                    "    setTimeout(function (){",
                    "        backend.call(\"restartBeforeC\", \"Restart before call\").want(String).then(function(s) {",
                    "            console.log(s); // Expects a String, like \"Restart before call works\"",
                    "        });",
                    "    }, 6000);"
                ],
                "expectType": "String",
                "expectVal": "\"Restart before call works\"",
                "file": "/home/lance/Exis/js/example/test-restart-client.js",
                "lineEnd": 21,
                "lineStart": 13
            },
            "register": {
                "code": [
                    "    this.register(\"restartBeforeC\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Restart before call\"",
                    "        return s + \" works\";",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Restart before call\"",
                "file": "/home/lance/Exis/js/example/test-restart-backend.js",
                "lineEnd": 17,
                "lineStart": 13
            }
        },
        "python": {
            "call": {
                "code": [
                    "        import time",
                    "        # Trying to restart the node before the call happens, but need to insert artificial delay to make this happen!",
                    "        print \"___NODERESTART___\"",
                    "        time.sleep(4.0)",
                    "        s = backend.call(\"restartBeforeC\", \"Restart before call\").wait(str)",
                    "        print(s) # Expects a str, like \"Restart before call works\""
                ],
                "expectType": "str",
                "expectVal": "\"Restart before call works\"",
                "file": "/home/lance/Exis/python/example/test-restart-client.py",
                "lineEnd": 20,
                "lineStart": 14
            },
            "register": {
                "code": [
                    "        @want(str)",
                    "        def restartBeforeC(s):",
                    "            print(s) # Expects a str, like \"Restart before call\"",
                    "            return \"{} works\".format(s)",
                    "        self.register(\"restartBeforeC\", restartBeforeC)"
                ],
                "expectType": "str",
                "expectVal": "\"Restart before call\"",
                "file": "/home/lance/Exis/python/example/test-restart-backend.py",
                "lineEnd": 19,
                "lineStart": 14
            }
        }
    },
    "Tour Basics 1": {
        "js": {
            "simple": {
                "code": [
                    "    console.log(\"Hello World\");"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-basics.js",
                "lineEnd": 14,
                "lineStart": 13
            }
        },
        "python": {
            "simple": {
                "code": [
                    "        print \"Hello World\""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-basics-client.py",
                "lineEnd": 16,
                "lineStart": 15
            }
        },
        "swift": {
            "simple": {
                "code": [
                    "        print(\"Hello World\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-basics.swift",
                "lineEnd": 9,
                "lineStart": 8
            }
        }
    },
    "Tour Basics 2": {
        "js": {
            "publish": {
                "code": [
                    "    for(var i = 0; i < 10; i++) {",
                    "        backend.publish(\"async\", i);",
                    "    }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-basics.js",
                "lineEnd": 26,
                "lineStart": 23
            },
            "subscribe": {
                "code": [
                    "    this.subscribe(\"async\", riffle.want(function(i) {",
                    "        console.log(i);",
                    "    }, Number));"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-basics.js",
                "lineEnd": 20,
                "lineStart": 17
            }
        },
        "python": {
            "publish": {
                "code": [
                    "        for i in range(0, 10):",
                    "            backend.publish(\"async\", i)"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-basics-client.py",
                "lineEnd": 21,
                "lineStart": 19
            },
            "subscribe": {
                "code": [
                    "        @want(int)",
                    "        def async(i):",
                    "            print i",
                    "        self.subscribe(\"async\", async)"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-basics-backend.py",
                "lineEnd": 18,
                "lineStart": 14
            }
        },
        "swift": {
            "publish": {
                "code": [
                    "        for i in 0...10 {",
                    "            backend.publish(\"async\", i)",
                    "        }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-basics.swift",
                "lineEnd": 21,
                "lineStart": 18
            },
            "subscribe": {
                "code": [
                    "        subscribe(\"async\") { (i: Int) in",
                    "            print(\"\\(i)\")",
                    "        }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-basics.swift",
                "lineEnd": 15,
                "lineStart": 12
            }
        }
    },
    "Tour Pub/Sub Lesson 1": {
        "js": {
            "publish": {
                "code": [
                    "    backend.publish(\"myFirstSub\", \"Hello\");"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-sub-client.js",
                "lineEnd": 14,
                "lineStart": 13
            },
            "subscribe": {
                "code": [
                    "    this.subscribe(\"myFirstSub\", riffle.want(function(s) {",
                    "        console.log(\"I got \" + s); // Expects a String, like \"I got Hello\"",
                    "    }, String));",
                    "    // Somewhere in another file or program...",
                    "    this.subscribe(\"myFirstSub\", riffle.want(function(s) {",
                    "        console.log(\"I got \" + s + \", too!\"); // Expects a String, like \"I got Hello, too!\"",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"I got Hello\"",
                "file": "/home/lance/Exis/js/example/tour-sub-backend.js",
                "lineEnd": 20,
                "lineStart": 13
            }
        },
        "python": {
            "publish": {
                "code": [
                    "        backend.publish(\"myFirstSub\", \"Hello\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-sub-client.py",
                "lineEnd": 16,
                "lineStart": 15
            },
            "subscribe": {
                "code": [
                    "        @want(str)",
                    "        def myFirstSub1(s):",
                    "            print(\"I got {}\".format(s))  # Expects a str, like \"I got Hello\"",
                    "        self.subscribe(\"myFirstSub\", myFirstSub1)",
                    "        # Somewhere in another file or program...",
                    "        @want(str)",
                    "        def myFirstSub2(s):",
                    "            print(\"I got {}, too!\".format(s))  # Expects a str, like \"I got Hello, too!\"",
                    "        self.subscribe(\"myFirstSub\", myFirstSub2)"
                ],
                "expectType": "str",
                "expectVal": "\"I got Hello\"",
                "file": "/home/lance/Exis/python/example/tour-sub-backend.py",
                "lineEnd": 23,
                "lineStart": 14
            }
        },
        "swift": {
            "publish": {
                "code": [
                    "        backend.publish(\"myFirstSub\", \"Hello\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-sub-client.swift",
                "lineEnd": 9,
                "lineStart": 8
            },
            "subscribe": {
                "code": [
                    "        subscribe(\"myFirstSub\") { (s: String) in",
                    "            print(\"I got \\(s)\") // Expects a String, like \"I got Hello\"",
                    "        }",
                    "",
                    "        // Somewhere in another file or program...",
                    "        subscribe(\"myFirstSub\") { (s: String) in",
                    "            print(\"I got \\(s), too!\") // Expects a String, like \"I got Hello, too!\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"I got Hello\"",
                "file": "/home/lance/Exis/swift/example/tour-sub-backend.swift",
                "lineEnd": 16,
                "lineStart": 8
            }
        }
    },
    "Tour Pub/Sub Lesson 2 Fails": {
        "js": {
            "publish": {
                "code": [
                    "    backend.publish(\"iWantInts\", \"Hi\").then(function () {",
                    "        console.log(\"Publish to iWantInts complete\");",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-sub-client.js",
                "lineEnd": 33,
                "lineStart": 27
            },
            "subscribe": {
                "code": [
                    "    this.subscribe(\"iWantInts\", riffle.want(function(i) {",
                    "        // This function won't execute",
                    "        console.log(\"You won't see me :)\");",
                    "    }, Number));"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-sub-backend.js",
                "lineEnd": 34,
                "lineStart": 30
            }
        },
        "python": {
            "publish": {
                "code": [
                    "        backend.publish(\"iWantInts\", \"Hi\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-sub-client.py",
                "lineEnd": 25,
                "lineStart": 24
            },
            "subscribe": {
                "code": [
                    "        @want(int)",
                    "        def iWantInts(i):",
                    "            # This function isn't called",
                    "            print(\"You won't see me :)\")",
                    "        self.subscribe(\"iWantInts\", iWantInts)"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-sub-backend.py",
                "lineEnd": 39,
                "lineStart": 34
            }
        },
        "swift": {
            "publish": {
                "code": [
                    "        backend.publish(\"iWantInts\", \"Hi\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-sub-client.swift",
                "lineEnd": 18,
                "lineStart": 17
            },
            "subscribe": {
                "code": [
                    "        subscribe(\"iWantInts\") { (i: Int) in",
                    "            print(\"You won't see me :)\")",
                    "        }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-sub-backend.swift",
                "lineEnd": 29,
                "lineStart": 26
            }
        }
    },
    "Tour Pub/Sub Lesson 2 Works": {
        "js": {
            "publish": {
                "code": [
                    "    backend.publish(\"iWantStrings\", \"Hi\").then(function() {",
                    "        console.log(\"Publish to iWantStrings complete\");",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-sub-client.js",
                "lineEnd": 24,
                "lineStart": 18
            },
            "subscribe": {
                "code": [
                    "    this.subscribe(\"iWantStrings\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hi\"",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/js/example/tour-sub-backend.js",
                "lineEnd": 27,
                "lineStart": 24
            }
        },
        "python": {
            "publish": {
                "code": [
                    "        backend.publish(\"iWantStrings\", \"Hi\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-sub-client.py",
                "lineEnd": 21,
                "lineStart": 20
            },
            "subscribe": {
                "code": [
                    "        @want(str)",
                    "        def iWantStrings(s):",
                    "            print(s)  # Expects a str, like \"Hi\"",
                    "        self.subscribe(\"iWantStrings\", iWantStrings)"
                ],
                "expectType": "str",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/python/example/tour-sub-backend.py",
                "lineEnd": 31,
                "lineStart": 27
            }
        },
        "swift": {
            "publish": {
                "code": [
                    "        backend.publish(\"iWantStrings\", \"Hi\")"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-sub-client.swift",
                "lineEnd": 14,
                "lineStart": 13
            },
            "subscribe": {
                "code": [
                    "        subscribe(\"iWantStrings\") { (s: String) in",
                    "            print(s) // Expects a String, like \"Hi\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/swift/example/tour-sub-backend.swift",
                "lineEnd": 23,
                "lineStart": 20
            }
        }
    },
    "Tour Reg/Call Lesson 1": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"myFirstFunc\", \"Hello\").want(String).then(function (s) {",
                    "        console.log(s); // Expects a String, like \"Hello World\"",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 19,
                "lineStart": 13
            },
            "register": {
                "code": [
                    "    this.register(\"myFirstFunc\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hello\"",
                    "        return s + \" World\";",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 18,
                "lineStart": 14
            }
        },
        "python": {
            "call": {
                "code": [
                    "        s = backend.call(\"myFirstFunc\", \"Hello\").wait(str)",
                    "        print s # Expects a str, like \"Hello World\""
                ],
                "expectType": "str",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 17,
                "lineStart": 15
            },
            "register": {
                "code": [
                    "        @want(str)",
                    "        def myFirstFunc(s):",
                    "            print(s)  # Expects a str, like \"Hello\"",
                    "            return \"{} World\".format(s)",
                    "        self.register(\"myFirstFunc\", myFirstFunc)"
                ],
                "expectType": "str",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 19,
                "lineStart": 14
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        backend.call(\"myFirstFunc\", \"Hello\").then { (s: String) in",
                    "            print(s) // Expects a String, like \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello World\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-client.swift",
                "lineEnd": 11,
                "lineStart": 8
            },
            "register": {
                "code": [
                    "        register(\"myFirstFunc\") { (s: String) -> String in",
                    "            print(s) // Expects a String, like \"Hello\"",
                    "            return \"Hello World\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hello\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-backend.swift",
                "lineEnd": 18,
                "lineStart": 14
            }
        }
    },
    "Tour Reg/Call Lesson 2 Fails": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"iWantInts\", \"Hi\").want(String).then(function (s) {",
                    "        console.log(s);",
                    "    },",
                    "    function (err) {",
                    "        console.log(err) // Expects a String, like \"wamp.error.invalid_argument: Cumin: expecting primitive float, got string\"",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"wamp.error.invalid_argument: Cumin: expecting primitive float, got string\"",
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 38,
                "lineStart": 32
            },
            "register": {
                "code": [
                    "    this.register(\"iWantInts\", riffle.want(function(i) {",
                    "        console.log(i);",
                    "        return \"Thanks for sending int \" + i;",
                    "    }, Number));"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 33,
                "lineStart": 29
            }
        },
        "python": {
            "call": {
                "code": [
                    "        try:",
                    "            s = backend.call(\"iWantInts\", \"Hi\").wait(str)",
                    "            print s",
                    "        except riffle.Error as e:",
                    "            print e # Expects a str, like \"wamp.error.invalid_argument: Cumin: expecting primitive int, got string\""
                ],
                "expectType": "str",
                "expectVal": "\"wamp.error.invalid_argument: Cumin: expecting primitive int, got string\"",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 31,
                "lineStart": 26
            },
            "register": {
                "code": [
                    "        @want(int)",
                    "        def iWantInts(i):",
                    "            print(i)",
                    "            return \"Thanks for sending int {}\".format(i)",
                    "        self.register(\"iWantInts\", iWantInts)"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 36,
                "lineStart": 31
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        backend.call(\"iWantInts\", \"Hi\").then { (s: String) in",
                    "            print(s)",
                    "        }.error { reason in",
                    "            print(reason) // Expects a String, like \"Cumin: expecting primitive int, got str\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Cumin: expecting primitive int, got str\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-client.swift",
                "lineEnd": 26,
                "lineStart": 21
            },
            "register": {
                "code": [
                    "        register(\"iWantInts\") { (i: Int) -> String in",
                    "            print(i)",
                    "            return \"Thanks for sending int \\(i)\"",
                    "        }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-reg-backend.swift",
                "lineEnd": 33,
                "lineStart": 29
            }
        }
    },
    "Tour Reg/Call Lesson 2 Wait Check": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"iGiveInts\", \"Hi\").want(String).then(function (s) {",
                    "        console.log(s);",
                    "    },",
                    "    function (err) {",
                    "        console.log(err); // Expects a String, like \"Cumin: expecting primitive str, got int\"",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Cumin: expecting primitive str, got int\"",
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 47,
                "lineStart": 41
            },
            "register": {
                "code": [
                    "    this.register(\"iGiveInts\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hi\"",
                    "        return 42;",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 40,
                "lineStart": 36
            }
        },
        "python": {
            "call": {
                "code": [
                    "        try:",
                    "            s = backend.call(\"iGiveInts\", \"Hi\").wait(str)",
                    "            print s",
                    "        except riffle.Error as e:",
                    "            print e # Expects a str, like \"Cumin: expecting primitive str, got int\""
                ],
                "expectType": "str",
                "expectVal": "\"Cumin: expecting primitive str, got int\"",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 39,
                "lineStart": 34
            },
            "register": {
                "code": [
                    "        @want(str)",
                    "        def iGiveInts(s):",
                    "            print(s)  # Expects a str, like \"Hi\"",
                    "            return 42",
                    "        self.register(\"iGiveInts\", iGiveInts)"
                ],
                "expectType": "str",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 44,
                "lineStart": 39
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        backend.call(\"iGiveInts\", \"Hi\").then { (s: String) in",
                    "            print(s)",
                    "        }.error { reason in",
                    "            print(reason) // Expects a String, like \"Cumin: expecting primitive str, got int\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Cumin: expecting primitive str, got int\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-client.swift",
                "lineEnd": 34,
                "lineStart": 29
            },
            "register": {
                "code": [
                    "        register(\"iGiveInts\") { (s: String) -> Int in",
                    "            print(s) // Expects a String, like \"Hi\"",
                    "            return 42",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-backend.swift",
                "lineEnd": 40,
                "lineStart": 36
            }
        }
    },
    "Tour Reg/Call Lesson 2 Works": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"iWantStrings\", \"Hi\").want(String).then(function (s) {",
                    "        console.log(s); // Expects a String, like \"Thanks for saying Hi\"",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Thanks for saying Hi\"",
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 29,
                "lineStart": 23
            },
            "register": {
                "code": [
                    "    this.register(\"iWantStrings\", riffle.want(function(s) {",
                    "        console.log(s); // Expects a String, like \"Hi\"",
                    "        return \"Thanks for saying \" + s;",
                    "    }, String));"
                ],
                "expectType": "String",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 26,
                "lineStart": 22
            }
        },
        "python": {
            "call": {
                "code": [
                    "        s = backend.call(\"iWantStrings\", \"Hi\").wait(str)",
                    "        print s # Expects a str, like \"Thanks for saying Hi\""
                ],
                "expectType": "str",
                "expectVal": "\"Thanks for saying Hi\"",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 23,
                "lineStart": 21
            },
            "register": {
                "code": [
                    "        @want(str)",
                    "        def iWantStrings(s):",
                    "            print(s)  # Expects a str, like \"Hi\"",
                    "            return \"Thanks for saying {}\".format(s)",
                    "        self.register(\"iWantStrings\", iWantStrings)"
                ],
                "expectType": "str",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 28,
                "lineStart": 23
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        backend.call(\"iWantStrings\", \"Hi\").then { (s: String) in",
                    "            print(s) // Expects a String, like \"Thanks for saying Hi\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Thanks for saying Hi\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-client.swift",
                "lineEnd": 18,
                "lineStart": 15
            },
            "register": {
                "code": [
                    "        register(\"iWantStrings\") { (s: String) -> String in",
                    "            print(s) // Expects a String, like \"Hi\"",
                    "            return \"Thanks for saying \" + s",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Hi\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-backend.swift",
                "lineEnd": 26,
                "lineStart": 22
            }
        }
    },
    "Tour Reg/Call Lesson 3 Fails": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"iWantManyInts\", [0, 1, \"two\"]).want(String).then(function (s) {",
                    "        console.log(s);",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err); // Expects a String, like \"Cumin: expecting primitive float, got string\"",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Cumin: expecting primitive float, got string\"",
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 66,
                "lineStart": 60
            },
            "register": {
                "code": [
                    "    this.register(\"iWantManyInts\", riffle.want(function(s) {",
                    "        console.log(s);",
                    "        return \"Thanks for \" + s.length + \" ints!\"",
                    "    }, [Number]));"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 55,
                "lineStart": 51
            }
        },
        "python": {
            "call": {
                "code": [
                    "        try:",
                    "            s = backend.call(\"iWantManyInts\", [0, 1, \"two\"]).wait(str)",
                    "            print s",
                    "        except riffle.Error as e:",
                    "            print e # Expects a str, like \"wamp.error.invalid_argument: Cumin: expecting primitive int, got string\""
                ],
                "expectType": "str",
                "expectVal": "\"wamp.error.invalid_argument: Cumin: expecting primitive int, got string\"",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 53,
                "lineStart": 48
            },
            "register": {
                "code": [
                    "        @want([int])",
                    "        def iWantManyInts(i):",
                    "            print(i)",
                    "            return \"Thanks for {} ints!\".format(len(i))",
                    "        self.register(\"iWantManyInts\", iWantManyInts)"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 61,
                "lineStart": 56
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        let notAllInts: [Any] = [0, 1, \"two\"]",
                    "        backend.call(\"iWantManyInts\", notAllInts).then { (s: String) in",
                    "            print(s)",
                    "        }.error { reason in",
                    "            print(reason) // Expects a String, like \"wamp.error.invalid_argument: Cumin: expecting primitive int, got string\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"wamp.error.invalid_argument: Cumin: expecting primitive int, got string\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-client.swift",
                "lineEnd": 50,
                "lineStart": 44
            },
            "register": {
                "code": [
                    "        register(\"iWantManyInts\") { (i: [Int]) -> String in",
                    "            print(i)",
                    "            return \"Thanks for \\(i.count) ints!\"",
                    "        }"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/swift/example/tour-reg-backend.swift",
                "lineEnd": 55,
                "lineStart": 51
            }
        }
    },
    "Tour Reg/Call Lesson 3 Works": {
        "js": {
            "call": {
                "code": [
                    "    backend.call(\"iWantManyStrings\", [\"This\", \"is\", \"cool\"]).want(String).then(function (s) {",
                    "        console.log(s); // Expects a String, like \"Thanks for 3 strings!\"",
                    "    },",
                    "    function (err) {",
                    "        console.log(\"ERROR: \", err);",
                    "    });"
                ],
                "expectType": "String",
                "expectVal": "\"Thanks for 3 strings!\"",
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 57,
                "lineStart": 51
            },
            "register": {
                "code": [
                    "    this.register(\"iWantManyStrings\", riffle.want(function(s) {",
                    "        console.log(s.join(\" \")); // Expects a String, like \"This is cool\"",
                    "        return \"Thanks for \" + s.length + \" strings!\"",
                    "    }, [String]));"
                ],
                "expectType": "String",
                "expectVal": "\"This is cool\"",
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 48,
                "lineStart": 44
            }
        },
        "python": {
            "call": {
                "code": [
                    "        s = backend.call(\"iWantManyStrings\", [\"This\", \"is\", \"cool\"]).wait(str)",
                    "        print s # Expects a str, like \"Thanks for 3 strings!\""
                ],
                "expectType": "str",
                "expectVal": "\"Thanks for 3 strings!\"",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 45,
                "lineStart": 43
            },
            "register": {
                "code": [
                    "        @want([str])",
                    "        def iWantManyStrings(s):",
                    "            print \":\".join(s) # Expects a str, like \"This:is:cool\"",
                    "            return \"Thanks for {} strings!\".format(len(s))",
                    "        self.register(\"iWantManyStrings\", iWantManyStrings)"
                ],
                "expectType": "str",
                "expectVal": "\"This:is:cool\"",
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 53,
                "lineStart": 48
            }
        },
        "swift": {
            "call": {
                "code": [
                    "        backend.call(\"iWantManyStrings\", [\"This\", \"is\", \"cool\"]).then { (s: String) in",
                    "            print(s) // Expects a String, like \"Thanks for 3 strings!\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"Thanks for 3 strings!\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-client.swift",
                "lineEnd": 41,
                "lineStart": 38
            },
            "register": {
                "code": [
                    "        register(\"iWantManyStrings\") { (s: [String]) -> String in",
                    "            print(s.joinWithSeparator(\" \")) // Expects a String, like \"This is cool\"",
                    "            return \"Thanks for \\(s.count) strings!\"",
                    "        }"
                ],
                "expectType": "String",
                "expectVal": "\"This is cool\"",
                "file": "/home/lance/Exis/swift/example/tour-reg-backend.swift",
                "lineEnd": 48,
                "lineStart": 44
            }
        }
    },
    "Tour Reg/Call Lesson 4 Basic Student": {
        "js": {
            "call": {
                "code": [
                    "    function Student() {",
                    "        this.name = \"Student Name\";",
                    "        this.age = 20;",
                    "        this.studentID = 0;",
                    "    }",
                    "    var s = new Student();",
                    "    s.name = \"John Smith\";",
                    "    s.age = 18;",
                    "    s.studentID = 1234;",
                    "    backend.call(\"sendStudent\", s);"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/tour-reg-client.js",
                "lineEnd": 80,
                "lineStart": 70
            },
            "register": {
                "code": [
                    "    function Student() {",
                    "        this.name = String;",
                    "        this.age = Number;",
                    "        this.studentID = Number;",
                    "    }",
                    "",
                    "    Student.prototype.toString = function() {",
                    "        return this.name + \", Age: \" + this.age + \", ID: \" + this.studentID;",
                    "    };",
                    "",
                    "    this.register(\"sendStudent\", riffle.want(function(s) {",
                    "        console.log(s.toString()); // Expects a String, like \"John Smith, Age: 18, ID: 1234\"",
                    "    }, riffle.modelObject(Student)));"
                ],
                "expectType": "String",
                "expectVal": "\"John Smith, Age: 18, ID: 1234\"",
                "file": "/home/lance/Exis/js/example/tour-reg-backend.js",
                "lineEnd": 72,
                "lineStart": 59
            }
        },
        "python": {
            "call": {
                "code": [
                    "        class Student(riffle.ModelObject):",
                    "            name = \"Student Name\"",
                    "            age = 20",
                    "            studentID = 0",
                    "        s = Student()",
                    "        s.name = \"John Smith\"",
                    "        s.age = 18",
                    "        s.studentID = 1234",
                    "        backend.call(\"sendStudent\", s).wait()"
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 66,
                "lineStart": 57
            },
            "register": {
                "code": [
                    "        class Student(riffle.ModelObject):",
                    "            name = \"Student Name\"",
                    "            age = 20",
                    "            studentID = 0",
                    "            def __str__(self):",
                    "                return \"{}, Age: {}, ID: {}\".format(self.name, self.age, self.studentID)",
                    "        @want(Student)",
                    "        def sendStudent(s):",
                    "            print s # Expects a str, like \"John Smith, Age: 18, ID: 1234\"",
                    "        self.register(\"sendStudent\", sendStudent)"
                ],
                "expectType": "str",
                "expectVal": "\"John Smith, Age: 18, ID: 1234\"",
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 75,
                "lineStart": 65
            }
        }
    },
    "Tour Reg/Call Lesson 4 Student Functions": {
        "python": {
            "call": {
                "code": [
                    "        class Student(riffle.ModelObject):",
                    "            name, age, studentID = \"Student Name\", 20, 0",
                    "        s = Student()",
                    "        s.name, s.age, s.studentID = \"John Smith\", 18, 1234",
                    "        s = backend.call(\"changeStudentID\", s).wait(Student)",
                    "        print s.studentID # Expects an int, like 5678"
                ],
                "expectType": "int",
                "expectVal": "5678",
                "file": "/home/lance/Exis/python/example/tour-reg-client.py",
                "lineEnd": 75,
                "lineStart": 69
            },
            "register": {
                "code": [
                    "        class Student(riffle.ModelObject):",
                    "            name, age, studentID = \"Student Name\", 20, 0",
                    "            def changeID(self, newID):",
                    "                self.studentID = 5678",
                    "        @want(Student)",
                    "        def changeStudentID(s):",
                    "            print s.studentID # Expects an int, like 1234",
                    "            s.changeID(5678)",
                    "            return s",
                    "        self.register(\"changeStudentID\", changeStudentID)"
                ],
                "expectType": "int",
                "expectVal": "1234",
                "file": "/home/lance/Exis/python/example/tour-reg-backend.py",
                "lineEnd": 88,
                "lineStart": 78
            }
        }
    },
    "Want Definitions Models": {
        "js": {
            "defs": {
                "code": [
                    "",
                    "// In NodeJS you must import jsriffle:",
                    "var riffle = require('jsriffle');",
                    "",
                    "// Declare a User class",
                    "function User() {",
                    "    this.name = \"default\";",
                    "}",
                    "// define a function that is only called",
                    "// if a User is passed:",
                    "this.register(\"endpoint\",",
                    "    riffle.want(function(u) {...}, riffle.modelObject(User))",
                    ");",
                    "// call a function, send a User, expect a User back",
                    "var u = new User();",
                    "u.name = \"This guy\";",
                    "backend.call(\"get_user\", u).want(riffle.modelObject(User)).then(",
                    "    function(otherU) {...}",
                    ");",
                    "",
                    "// A basic model of a Student",
                    "function Student() {",
                    "    this.first = \"firstName\";",
                    "    this.last = \"lastName\";",
                    "    this.grade = 0;",
                    "}",
                    "// Expect a Student",
                    "riffle.want(function (s) {...}, riffle.modelObject(Student));",
                    "// Send a Student",
                    "var s = new Student();",
                    "s.first = \"John\";",
                    "s.last = \"Smith\";",
                    "s.grade = 90;",
                    "backend.call(\"send_student\", s);",
                    "// Require a Student is returned",
                    "backend.call(\"send_student\", s).want(riffle.modelObject(Student)).then(function(s){ ...});",
                    "",
                    "// A model that contains a collection of models",
                    "function Student() {",
                    "    this.first = \"firstName\";",
                    "    this.last = \"lastName\";",
                    "    this.grade = 0;",
                    "}",
                    "function Classroom() {",
                    "    this.students = [Student];",
                    "    this.roomNumber = 0;",
                    "}",
                    "// Expect a Classroom",
                    "riffle.want(function (s) {...}, riffle.modelObject(Classroom));",
                    "// Send a Classroom",
                    "var s = new Student();",
                    "s.first = \"John\";",
                    "s.last = \"Smith\";",
                    "s.grade = 90;",
                    "var c = new Classroom();",
                    "c.roomNumber = 100;",
                    "c.students[c.students.length] = s;",
                    "backend.call(\"send_classroom\", c);",
                    "// Require a Classroom is returned",
                    "backend.call(\"send_classroom\", c).want(riffle.modelObject(Classroom)).then(function(c){ ...});",
                    "",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/definitions-models.js",
                "lineEnd": 65,
                "lineStart": 3
            }
        },
        "python": {
            "defs": {
                "code": [
                    "# In Python you must import:",
                    "import riffle",
                    "from riffle import want",
                    "",
                    "# Declare a User class",
                    "class User(riffle.ModelObject):",
                    "    name = \"default\"",
                    "# define a function that is only called",
                    "# if a User is passed:",
                    "@want(User)",
                    "def myFunction(u):",
                    "    print(u.name) # User class",
                    "# call a function and expect the result to be",
                    "# a User class",
                    "u = example.call(\"get_user\").wait(User)",
                    "",
                    "# NOTE: each @want must decorate a function",
                    "# below, we removed them for clarity",
                    "",
                    "# A basic model of a Student",
                    "class Student(riffle.ModelObject):",
                    "    first = \"firstName\"",
                    "    last = \"lastName\"",
                    "    grade = 0",
                    "@want(Student) # Decorate expecting a Student class",
                    "# Require a Student class is returned",
                    "s = example.call(\"get_student\").wait(Student)",
                    "",
                    "# A model that contains a collection of models",
                    "class Student(riffle.ModelObject):",
                    "    first = \"firstName\"",
                    "    last = \"lastName\"",
                    "    grade = 0",
                    "class Classroom(riffle.ModelObject):",
                    "    students = list(Student)",
                    "    roomNumber = 0",
                    "@want(Classroom) # Decorate expecting a Classroom class",
                    "# Require a Classroom class is returned",
                    "c = example.call(\"get_classroom\").wait(Classroom)",
                    "",
                    "# You could also define the object directly, but it",
                    "# wouldn't contain any functions defined in the class",
                    "class User(riffle.ModelObject):",
                    "    first = \"firstName\"",
                    "    def setFirst(self, name):",
                    "        self.first = name",
                    "# The result here enables u.setFirst('a')",
                    "@want(User) # Decorate to get a User",
                    "# Require a User so u.setFirst() can be called",
                    "u = example.call(\"get_user\").wait(User)",
                    "# The result here won't have a u.setFirst() function",
                    "# because it is a dict not a User class",
                    "@want({\"first\": str})",
                    "u = example.call(\"get_user\").wait({\"first\": str})",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/definitions-models.py",
                "lineEnd": 58,
                "lineStart": 3
            }
        }
    },
    "Want Definitions Recv": {
        "js": {
            "defs": {
                "code": [
                    "",
                    "// In NodeJS you must import jsriffle:",
                    "var riffle = require('jsriffle');",
                    "",
                    "// After importing riffle, simply add types to",
                    "// function declarations wrapped with riffle.want",
                    "this.register(\"endpoint\", riffle.want(function(s) {",
                    "    console.log(s);",
                    "}, String));",
                    "// the registered endpoint will only execute",
                    "// if it is provided a String",
                    "",
                    "// Nothing is returned",
                    "riffle.want(function () { ... })",
                    "",
                    "// The primitives",
                    "riffle.want(function (s) { ... }, String)",
                    "riffle.want(function (i) { ... }, Number)",
                    "riffle.want(function (f) { ... }, Number)",
                    "riffle.want(function (b) { ... }, Boolean)",
                    "",
                    "// Collections",
                    "// A list of anything",
                    "riffle.want(function (l) { ... }, [])",
                    "// A dict of anything",
                    "riffle.want(function (d) { ... }, {})",
                    "",
                    "// Many arguments",
                    "// This function requires a string and 2 numbers",
                    "riffle.want(function (s, i, f) { ... }, String, Number, Number)",
                    "// This function requires a string and a list of numbers",
                    "riffle.want(function (s, l) { ... }, String, [Number])",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/definitions-recv.js",
                "lineEnd": 36,
                "lineStart": 3
            }
        },
        "python": {
            "defs": {
                "code": [
                    "",
                    "# In Python you must import want to use as",
                    "# a decorator",
                    "from riffle import want",
                    "",
                    "# After importing want, you simply decorate",
                    "# any function with it.",
                    "@want(str)",
                    "def myFunction(aString):",
                    "    print(aString) # Guaranteed str",
                    "# resulting function will only be called with",
                    "# the args if they are of the type specified",
                    "",
                    "# NOTE: each @want must decorate a function",
                    "# below, we removed them for clarity",
                    "",
                    "# Nothing is returned",
                    "@want()",
                    "",
                    "# The primitives",
                    "@want(str)",
                    "@want(int)",
                    "@want(float)",
                    "@want(bool)",
                    "",
                    "# Collections",
                    "@want(list) # A list of anything",
                    "@want(dict) # A dict containing anything",
                    "",
                    "# None is returned",
                    "@want(None)",
                    "",
                    "# Many arguments",
                    "@want(str, int, float) # 3 args: str, int, float",
                    "@want(str, [int]) # 2 args: str, list of many int's",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/definitions-recv.py",
                "lineEnd": 39,
                "lineStart": 3
            }
        }
    },
    "Want Definitions Send": {
        "js": {
            "defs": {
                "code": [
                    "",
                    "// In NodeJS you must import jsriffle:",
                    "var riffle = require('jsriffle');",
                    "",
                    "// First setup your domain",
                    "var app = riffle.Domain(\"xs.demo.test\");",
                    "// Now setup who you want to communicate with",
                    "var backend = app.subdomain(\"backend\");",
                    "",
                    "// Calls are asynchronous code, so they use",
                    "// promises, like so:",
                    "backend.call(\"endpoint\", \"arg1\").want(String).then(",
                    "    function (s) {",
                    "        console.log(\"I got a string: \" + s);",
                    "    }, function (err) {",
                    "        console.log(\"ERROR: \" + err);",
                    "    });",
                    "// The call above sends a string, and asks for",
                    "// a string, if the backend doesn't return a string",
                    "// then the error function will be called instead.",
                    "",
                    "// You can call without requiring anything in return",
                    "backend.call(\"hello\", \"hi\");",
                    "",
                    "// Asking for primitives",
                    "backend.call(\"hello\").want(String).then(",
                    "    function (s) {...}",
                    ");",
                    "backend.call(\"hello\").want(Number).then(",
                    "    function (n) {...}",
                    ");",
                    "backend.call(\"hello\").want(Boolean).then(",
                    "   function (b) {...}",
                    ");",
                    "",
                    "// Collections",
                    "backend.call(\"hello\").want([String]).then(",
                    "    function (stringList) {...}",
                    ");",
                    "backend.call(\"hello\").want({name: String}).then(",
                    "    function (myDict) {...}",
                    ");",
                    "// The argument myDict above will require a dict with the key name",
                    "// which is a String.",
                    "",
                    "// Many arguments",
                    "// s is str, i is int, b is boolean",
                    "backend.call(\"hello\").want(String, Number, Boolean).then(",
                    "    function (s, i, b) {...}",
                    ");",
                    "// d is str, e is a list of int's",
                    "backend.call(\"hello\").want(String, [Number]).then(",
                    "    function (d, e) {...}",
                    ");",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/js/example/definitions-send.js",
                "lineEnd": 58,
                "lineStart": 3
            }
        },
        "python": {
            "defs": {
                "code": [
                    "",
                    "# In Python you must import riffle",
                    "import riffle",
                    "",
                    "# First setup your domain",
                    "app = riffle.Domain(\"xs.demo.test\")",
                    "me = riffle.Domain(\"me\", superdomain=app)",
                    "me.join() # Make the connection as me",
                    "# Create a domain reference to who you want to",
                    "# communicate with",
                    "ex = riffle.Domain(\"example\", superdomain=app)",
                    "",
                    "# Since any call function can return values,",
                    "# you can specify type arguments.",
                    "myStr = ex.call(\"hello\", \"arg\").wait(str)",
                    "# myStr is guaranteed to be a str, if the",
                    "# registered function (hello) returns anything",
                    "# else it will not return properly.",
                    "",
                    "# You expect nothing as a return",
                    "arg = ex.call(\"hello\").wait()",
                    "",
                    "# You can pass any primitive",
                    "arg = ex.call(\"hello\").wait(str)",
                    "arg = ex.call(\"hello\").wait(int)",
                    "arg = ex.call(\"hello\").wait(float)",
                    "arg = ex.call(\"hello\").wait(bool)",
                    "",
                    "# Collections",
                    "arg = ex.call(\"hello\").wait(list)",
                    "arg = ex.call(\"hello\").wait(dict)",
                    "",
                    "# None is returned",
                    "arg = ex.call(\"hello\").wait(None)",
                    "",
                    "# Many arguments",
                    "# a is str, b is int, c is float",
                    "a, b, c = ex.call(\"hello\").wait(str, int, float)",
                    "# d is str, e is a list of int's",
                    "d, e = ex.call(\"hello\").wait(str, [int])",
                    ""
                ],
                "expectType": null,
                "expectVal": null,
                "file": "/home/lance/Exis/python/example/definitions-send.py",
                "lineEnd": 44,
                "lineStart": 3
            }
        }
    }
}
